#include <CImg.h>
#include "kernel.h"

using namespace cimg_library;

template <typename T>
CImg< T > Kernel::grayscale(CImg< T > image)
{
	CImg< int > grayscale(image.width(), image.height(), 1, 1, 0);

	cimg_forXY(image, x, y){
		int R = (int) image(x, y, 0, 0);
		int G = (int) image(x, y, 0, 1);
		int B = (int) image(x, y, 0, 2);
		grayscale(x, y) = (0.299 * R + 0.587 * G + 0.114 * B);
	}

	return (T)grayscale;
}
